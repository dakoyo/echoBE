# EchoBE マインクラフト統合版のプロキシミティチャット
簡単に統合版でボイスチャットができるシステムを作成しています。

## Todoと実装済みの要素


✅ **ルームの作成と参加**

✅ オーナーによるルーム作成フロー（Minecraft接続待機画面を含む）

✅ プレイヤーによるルームコード・プレイヤーコードを使った参加フロー

✅ 認証システム：プレイヤーコードを元に、オーナーがプレイヤーを認証する仕組み

✅ 認証成功/失敗時の適切なフィードバックと処理

✅ **WebRTC接続の確立**

✅ オーナー⇄プレイヤー：新規参加プレイヤーとオーナー間の初期WebRTC接続（データチャネルを含む）

✅ プレイヤー⇄プレイヤー：オーナーのデータチャネルを中継し、プレイヤー間でメッシュ型のWebRTC音声接続を確立する仕組み

✅ WebSocketハンドオフ：オーナーとのデータチャネル確立後、プレイヤーのWebSocket接続を意図的に切断し、WebRTC接続のみを維持する高度なハンドオフ機能

✅ **状態同期**

✅ オンライン/オフライン：各プレイヤーの接続状態がリアルタイムでUIに反映される

✅ 参加/退出：新規プレイヤーの参加や既存プレイヤーの退出が、オーナー経由で全クライアントに即時通知され、参加者リストが正確に更新される

✅ **テキストチャット機能**

✅ WebRTCデータチャネルを利用した、サーバー負荷の低いリアルタイムチャット

✅ オーナーがチャットメッセージを全プレイヤーに中継する仕組み

✅ 送信したメッセージが二重に表示されるバグは修正済み

✅ **基本的なUI/UX**

✅ プレイヤーリストの表示と、オンライン状態のインジケーター

✅ オーナー専用のプレイヤーキック機能（確認モーダル付き）

✅ 全ユーザー向けのルーム退出機能（確認モーダル付き）

✅ ルームコードのクリップボードへのコピー機能

✅ モバイル表示などに対応したレスポンシブな設定サイドバー

⚠️ **音声のミュート/スピーカーミュート**
UI上では切り替わるが、MediaStreamTrack.enabled などで実際の音声処理は未実装

⚠️ **プレイヤーごとの音量調整**
内部データは更新されるが、実際の `<audio>` 要素に反映されていない

⚠️ **音声デバイスの切り替え**
UIは存在するが、setSinkId や getUserMedia による処理は未実装

⚠️ **Minecraft連携**
`ipc/Minecraft.ts` はダミー実装で、実際のMinecraftとは通信していない

❌ **プロキシミティボイスチャット（距離減衰）**
距離に応じた音量制御ロジックは未実装。座標取得と音量計算が必要

❌ **観戦者モードの音声制御**
サイドバーのUIはあるが、実際の機能は未実装

❌ **設定の永続化**
音量・デバイス設定などはリロードでリセットされる。保存処理は未実装